{"version":3,"sources":["docs/js/app.js"],"names":["Element","prototype","hasClass","name","RegExp","test","this","className","addClass","removeClass","split","join","replace","window","getMouse","e","y","touches","pageY","clientY","x","pageX","clientX","navigator","userAgent","MSStream","vendor","mouseDownY","useImages","fps","totalFrames","duration","concurrent","scrolling","pow","end","endTime","previous","direction","diff","index","body","document","querySelector","page","overview","preloadPercent","track","steps","playerTime","markerTime","markers","Array","slice","call","querySelectorAll","map","node","addEventListener","setIndex","parseFloat","getAttribute","console","log","disc","source","jpg","webm","mp4","check","video","pictures","captionItems","images","rim","target","scrollbar","Scrollbar","use","OverscrollPlugin","init","plugins","overscroll","addListener","offset","limit","offsetWidth","offsetHeight","isLoaded","onScrollbarShouldScrollTo","options","selector","scrollTo","pause","resume","setScrollbar","isLoading","isSwitching","StartLoading","player","currentTime","play","setTime","i","Math","max","min","round","src","total","loaded","frame","requests","onCheckNextImage","length","push","onLoadNextImage","req","XMLHttpRequest","open","responseType","onload","status","blob","response","image","URL","createObjectURL","shift","setProgress","Init","onerror","send","PreloadImages","PreloadVideoTarget","InitVideo","percent","parseInt","setAttribute","promise","undefined","then","catch","error","callback","onprogress","videoBlob","autoplay","mute","html","toFixed","innerHTML","addSteps","onTrack","eventOptions","onMouseDown","onMove","onWheel","onUp","addMouseEvents","onTouchDown","addTouchEvents","onscroll","onScroll","requestAnimationFrame","animate","onLoop","paused","step","abs","trackHeight","filter","caption","distance","timeapi","peformance","performance","Date","fpsInterval","now","elapsed","preventDefault","stopImmediatePropagation","parentNode","children","indexOf","getY","innerHeight","shouldLockScroll","flag","previousY","scrubStart","onDown","stopPropagation","time","item","setNearestDirection","wheelDirection","deltaY","previousMarker","nextMarker","PointerEvent","passive","capture","removeEventListener","removeTouchEvents","removeMouseEvents","logo","mouse","svgs","classes","responseText","svg","href","top","offsetTop","innerWidth","down","move","switcher","slider","discOverview","rimOverview","discCover","rimCover","width","start","x2","onUpdate","polygons","v","x1","getPolygons","s1","s2","b1","b2","positions","reduce","a","b","shouldLoad","TweenLite","to","ease","Elastic","easeOut","onComplete","AddSwitcher"],"mappings":"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","file":"app.min.js","sourcesContent":["/* global window, document, console  */\n\n(function () {\n    'use strict';\n\n    Element.prototype.hasClass = function (name) {\n        return new RegExp(\"(?:^|\\\\s+)\" + name + \"(?:\\\\s+|$)\").test(this.className);\n    };\n\n    Element.prototype.addClass = function (name) {\n        if (!this.hasClass(name)) {\n            this.className = this.className ? (this.className + ' ' + name) : name;\n        }\n    };\n\n    Element.prototype.removeClass = function (name) {\n        if (this.hasClass(name)) {\n            this.className = this.className.split(name).join('').replace(/\\s\\s+/g, ' '); // .replace(new RegExp('(?:^|\\\\s+)' + name + '(?:\\\\s+|$)', 'g'), '');\n        }\n    };\n\n    window.getMouse = function (e) {\n        var y = 0.0;\n        if (e.touches) {\n            y = e.touches[0].pageY;\n        } else {\n            y = e.clientY;\n        }\n        var x = 0.0;\n        if (e.touches) {\n            x = e.touches[0].pageX;\n        } else {\n            x = e.clientX;\n        }\n        var mouse = {\n            x: x,\n            y: y\n        };\n        // console.log('getMouse', mouse);\n        return mouse;\n    };\n\n}());\n/* global window, document, console, TweenLite */\n\n(function () {\n    'use strict';\n\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n    var useImages = false;\n    var fps = 30.0;\n    var totalFrames = 1200;\n    var duration = totalFrames / fps;\n    var currentTime = 0.0;\n    var pageOffset = 0.0;\n    var currentMarker = 0.0;\n    var concurrent = 15;\n\n    var speed, mouseDownY;\n    var scrolling = {\n        pow: 0,\n        end: 0,\n        endTime: 0,\n        previous: 0,\n        direction: 0,\n        diff: 0,\n        index: 0,\n    };\n\n    var body = document.querySelector('body');\n    var page = document.querySelector('.page');\n    var overview = document.querySelector('.section-overview');\n    var preloadPercent = document.querySelector('.preload .percent');\n    var track = document.querySelector('.track');\n    var steps = document.querySelector('.steps');\n    var playerTime = document.querySelector('.player-time');\n    var markerTime = document.querySelector('.marker-time');\n    var markers = Array.prototype.slice.call(document.querySelectorAll('[data-marker]')).map(function (node, index) {\n        node.addEventListener('click', function () {\n            setIndex(index);\n        });\n        return parseFloat(node.getAttribute('data-marker'));\n    });\n    // markers.unshift(0);\n    // markers.push(duration);\n    console.log('markers', markers);\n\n    var disc = {\n        source: {\n            jpg: 'img/campagnolo/campagnolo_{0}.jpg',\n            webm: 'img/campagnolo.webm',\n            mp4: 'img/disc/disc.mp4',\n            check: 'img/Chrome_ImF.webm',\n        },\n        video: document.querySelector('.overview-disc .video'),\n        pictures: document.querySelector('.overview-disc .pictures'),\n        captionItems: Array.prototype.slice.call(document.querySelectorAll('.overview-disc .captions-item')),\n        images: [],\n    };\n    var rim = {\n        source: {\n            jpg: 'img/campagnolo/campagnolo_{0}.jpg',\n            webm: 'img/campagnolo.webm',\n            mp4: 'img/rim/rim.mp4',\n            check: 'img/Chrome_ImF.webm',\n        },\n        video: document.querySelector('.overview-rim .video'),\n        pictures: document.querySelector('.overview-rim .pictures'),\n        captionItems: Array.prototype.slice.call(document.querySelectorAll('.overview-rim .captions-item')),\n        images: [],\n    };\n    var target = null;\n\n    var scrollbar = setScrollbar();\n    var isLoading = false,\n        isLoaded = false,\n        isSwitching = false;\n\n    function StartLoading() {\n        body.addClass('loading');\n        isLoading = true;\n        if (useImages) {\n            body.addClass('use-pictures');\n            disc.player = disc.pictures;\n            disc.player.currentTime = 0.0;\n            disc.player.duration = duration;\n            disc.player.play = disc.player.pause = function () {};\n            disc.player.setTime = function () {\n                var i = Math.max(1, Math.min(totalFrames, Math.round(disc.player.currentTime * fps)));\n                if (disc.player.index !== i) {\n                    disc.player.index = i;\n                    // console.log(i, disc.pictures[i]);\n                    disc.player.src = disc.images[i];\n                }\n            };\n            rim.player = rim.pictures;\n            rim.player.currentTime = 0.0;\n            rim.player.duration = duration;\n            rim.player.play = rim.player.pause = function () {};\n            rim.player.setTime = function () {\n                var i = Math.max(1, Math.min(totalFrames, Math.round(rim.player.currentTime * fps)));\n                if (rim.player.index !== i) {\n                    rim.player.index = i;\n                    // console.log(i, rim.pictures[i]);\n                    rim.player.src = rim.images[i];\n                }\n            };\n            PreloadImages();\n        } else {\n            body.addClass('use-video');\n            disc.player = disc.video;\n            disc.player.setTime = function () {};\n            rim.player = rim.video;\n            rim.player.setTime = function () {};\n            PreloadVideo();\n        }\n    }\n\n    function addSteps() {\n        for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i];\n            var html = '<div class=\"step\" style=\"top:' + (marker / duration * 100).toFixed(3) + '%\"></div>';\n            steps.innerHTML += html;\n            // console.log(steps, html);\n        }\n    }\n\n    function setProgress(loaded, total) {\n        var progress = loaded / total;\n        var percent = parseInt(progress * 100);\n        if (preloadPercent) {\n            preloadPercent.setAttribute('style', 'width:' + percent + '%;');\n            // console.log(percent);\n        }\n    }\n\n    function PreloadImages() {\n        // solo 1 video\n        var total = totalFrames;\n        var loaded = 0;\n        var frame = 0;\n        var requests = [];\n\n        function onCheckNextImage() {\n            while (requests.length < concurrent && frame < total) {\n                requests.push(true);\n                onLoadNextImage(++frame);\n            }\n        }\n\n        function onLoadNextImage(frame) {\n            var req = new XMLHttpRequest();\n            req.open('GET', target.source.jpg.split('{0}').join(frame), true);\n            req.responseType = 'blob';\n            req.onload = function () {\n                if (this.status === 200) {\n                    var blob = this.response;\n                    var image = URL.createObjectURL(blob); // IE10+\n                    images[frame] = image;\n                    loaded++;\n                    requests.shift();\n                    setProgress(loaded, total);\n                    if (loaded === total) {\n                        target.player.setTime();\n                        Init();\n                    } else {\n                        onCheckNextImage();\n                    }\n                }\n            };\n            req.onerror = function (e) {\n                console.log('preload.error', e);\n            };\n            req.send();\n        }\n        onCheckNextImage();\n    }\n\n    function InitVideo() {\n        var promise = target.video.play();\n        if (promise !== undefined) {\n            promise.then(function () {\n                Init();\n            }).catch(function (e) {\n                console.log('video.error', e, target.video.error);\n            });\n        } else {\n            Init();\n        }\n    }\n\n    function PreloadVideoTarget(target, callback) {\n        var req = new XMLHttpRequest();\n        req.open('GET', target.source.mp4, true);\n        req.responseType = 'blob';\n        req.onprogress = function (e) {\n            setProgress(e.loaded, e.total);\n        };\n        req.onload = function () {\n            if (this.status === 200) {\n                var videoBlob = this.response;\n                var source = URL.createObjectURL(videoBlob); // IE10+\n                target.video.addEventListener('progress', function (e) {\n                    console.log('video.progress', e, target.video.duration);\n                }, false);\n                target.video.addEventListener('error', function (e) {\n                    console.log('video.error', e, target.video.error);\n                });\n                target.video.autoplay = true;\n                target.video.mute = true;\n                target.video.src = source;\n                if (callback) {\n                    callback();\n                }\n            }\n        };\n        req.onerror = function (e) {\n            console.log('preload.error', e);\n        };\n        req.send();\n    }\n\n    function PreloadVideo() {\n        PreloadVideoTarget(disc, function () {\n            PreloadVideoTarget(rim, function () {\n                InitVideo();\n            });\n        });\n        return;\n        console.log('PreloadVideo', target);\n        var req = new XMLHttpRequest();\n        req.open('GET', target.source.mp4, true);\n        req.responseType = 'blob';\n        req.onprogress = function (e) {\n            setProgress(e.loaded, e.total);\n        };\n        req.onload = function () {\n            if (this.status === 200) {\n                var videoBlob = this.response;\n                var source = URL.createObjectURL(videoBlob); // IE10+\n                target.video.addEventListener('progress', function (e) {\n                    console.log('video.progress', e, target.video.duration);\n                }, false);\n                target.video.addEventListener('error', function (e) {\n                    console.log('video.error', e, target.video.error);\n                });\n                target.video.autoplay = true;\n                target.video.mute = true;\n                target.video.src = source;\n                InitVideo();\n            }\n        };\n        req.onerror = function (e) {\n            console.log('preload.error', e);\n        };\n        req.send();\n    }\n\n    function Init() {\n        isLoading = false;\n        isLoaded = true;\n        body.removeClass('loading');\n        body.addClass('loaded');\n        body.addClass('submenu');\n\n        scrolling.pow = scrolling.end = 0;\n        speed = 0.0;\n        mouseDownY = null;\n\n        target.video.pause();\n\n        if (steps) {\n            addSteps();\n        }\n\n        addMouseEvents();\n        addTouchEvents();\n\n        window.onscroll = onScroll;\n        // setInterval(onLoop, 1000.0 / fps);\n        window.requestAnimationFrame(animate);\n\n        // setCaptionItems(1);\n        setIndex(1);\n    }\n\n    function elastic(pow) {\n        var accelamount = 0.05; //How fast the video will try to catch up with the target position. 1 = instantaneous, 0 = do nothing.\n        var bounceamount = 0.7; //value from 0 to 1 for how much backlash back and forth you want in the easing. 0 = no bounce whatsoever, 1 = lots and lots of bounce\n        speed += (scrolling.end - pow) * accelamount;\n        speed = Math.max(-1, Math.min(1, speed));\n        pow = (pow + speed) * (bounceamount) + (scrolling.end * (1 - bounceamount));\n        return pow;\n    }\n\n    function setCaptionItems(direction) {\n        target.captionItems.filter(function (caption, index) {\n            var distance = markers[index] - scrolling.pow * target.player.duration;\n            if (Math.abs(distance) > 2) {\n                caption.setAttribute('class', 'captions-item');\n            } else if (direction > 0) {\n                caption.setAttribute('class', 'captions-item ' + (distance > -0.1 ? 'entering' : 'exiting'));\n            } else if (direction < 0) {\n                caption.setAttribute('class', 'captions-item ' + (distance < 0.1 ? 'entering' : 'exiting'));\n            }\n        });\n    }\n\n    function onLoop(target) {\n        if (target.player.duration) {\n            if (mouseDownY) {\n                target.player.pause();\n                scrolling.pow = scrolling.end;\n                target.player.currentTime = scrolling.pow * target.player.duration;\n                target.player.setTime();\n            } else {\n                if (scrolling.end !== scrolling.pow) {\n                    /*\n                    if (timeDirection > 0 && target.player.paused) {\n                        target.player.play();\n                    } else if (timeDirection < 0 && !target.player.paused) {\n                        target.player.pause();\n                    }\n                    */\n                    if (!target.player.paused) {\n                        target.player.pause();\n                    }\n                    var diff = scrolling.end - scrolling.pow;\n                    var step = 1.0 / fps;\n                    if (Math.abs(diff * target.player.duration) < step) {\n                        scrolling.pow = scrolling.end;\n                    } else {\n                        var direction = diff ? diff / Math.abs(diff) : 0;\n                        scrolling.pow += (step * direction) / target.player.duration;\n                    }\n                    var currentTime = Math.round(scrolling.pow * target.player.duration / step) * step + 0.00001;\n                    target.player.currentTime = currentTime;\n                    target.player.setTime();\n                }\n            }\n            if (playerTime) {\n                var trackHeight = track.offsetHeight;\n                playerTime.setAttribute('style', 'top:' + ((target.player.currentTime / target.player.duration) * trackHeight) + 'px;');\n            }\n            setCaptionItems(scrolling.direction);\n        }\n    }\n\n    var timeapi = window.peformance ? performance : Date;\n    var fpsInterval = 1000 / fps,\n        now = 0,\n        then = 0,\n        elapsed = 0;\n\n    function animate() {\n        // calc elapsed time since last loop\n        now = timeapi.now();\n        elapsed = now - then;\n        // if enough time has elapsed, draw the next frame\n\n        if (elapsed > fpsInterval) {\n\n            // Get ready for next frame by setting then=now, but also adjust for your\n            // specified fpsInterval not being a multiple of RAF's interval (16.7ms)\n            then = now - (elapsed % fpsInterval);\n\n            // Put your drawing code here\n            onLoop(target);\n        }\n        // request another frame\n        requestAnimationFrame(animate);\n    }\n\n    function onTrack(e) {\n        if (!isSwitching) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            if (e.target.getAttribute('class') === 'step') {\n                var nodes = Array.prototype.slice.call(e.target.parentNode.children);\n                var index = nodes.indexOf(e.target);\n                setIndex(index);\n            }\n            return false;\n        }\n    }\n\n    function getY(e) {\n        var y = 0.0;\n        if (e.touches) {\n            y = e.touches[0].pageY;\n        } else {\n            y = e.clientY;\n        }\n        return Math.max(0, Math.min(window.innerHeight, y));\n    }\n\n    function shouldLockScroll(direction) {\n        var flag = false;\n        if ((scrolling.pow < 1.0 && direction === 1) || ((!scrollbar || scrollbar.offset.y < 10) && direction === -1)) {\n            flag = true;\n        }\n        /*\n        if (flag) {\n            scrollbar.pause();\n        } else {\n            scrollbar = scrollbar.resume();\n        }\n        */\n        // console.log('shouldLockScroll', flag, direction, scrolling.pow, scrollbar.offset.y, direction);\n        return flag;\n    }\n\n    var previousY,\n        scrubStart = 0.0;\n\n    function onDown(e) {\n        if (scrollbar.offset.y < 10) {\n            // console.log('scrub.onDown');\n            var y = getY(e);\n            // console.log('onDown', y);\n            previousY = null;\n            mouseDownY = y;\n            scrubStart = scrolling.end || 0;\n            /*\n            if (shouldLockScroll(1)) {\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n            */\n        }\n    }\n\n    function onMove(e) {\n        if (isSwitching) {\n            previousY = null;\n            mouseDownY = null;\n            return;\n        }\n        if (mouseDownY) {\n            var y = getY(e);\n            // console.log('onMove', y);\n            previousY = y;\n            if (Math.abs(mouseDownY - y) > 1) {\n                var min = 0,\n                    max = 1,\n                    pow = (mouseDownY - y) / (window.innerHeight * 3);\n                scrolling.end = Math.max(0, Math.min(1, scrubStart + pow));\n                // console.log('onMove', scrubStart, pow);\n                setScroll();\n            }\n            var direction = y - mouseDownY > 0 ? -1 : 1;\n            if (shouldLockScroll(direction)) {\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n    }\n\n    function onUp(e) {\n        if (mouseDownY) {\n            var y = previousY;\n            // console.log('onUp', y);\n            var diff = (mouseDownY - y);\n            // console.log(y, mouseDownY, diff);\n            if (diff) {\n                var direction = diff / Math.abs(diff);\n                var time = scrolling.end * target.player.duration;\n                markers.filter(function (item, index) {\n                    if (time > item && time < markers[index + 1]) {\n                        scrolling.index = index + (direction > 0 ? 0 : 1);\n                        // console.log('scrolling.index', scrolling.index);\n                    }\n                });\n                setNearestDirection(direction);\n                setScroll();\n            }\n        }\n        mouseDownY = null;\n    }\n\n    function onWheel(e) {\n        var wheelDirection = e.deltaY / Math.abs(e.deltaY);\n        setNearestDirection(wheelDirection);\n        setScroll();\n        if (shouldLockScroll(wheelDirection)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            // scrollbar.setPosition(0, 0);\n            // console.log('onWheel', e);\n            return false;\n        }\n    }\n\n    function onScroll() {\n        if (markerTime) {\n            var trackHeight = track.offsetHeight;\n            markerTime.setAttribute('style', 'top : ' + (scrolling.end * (trackHeight - 30)) + 'px;');\n        }\n    }\n\n    function setIndex(index) {\n        if (index !== scrolling.index) {\n            var direction = (index - scrolling.index) / Math.abs(index - scrolling.index);\n            var previousMarker = markers[scrolling.index];\n            var nextMarker = markers[index];\n            var currentTime = scrolling.pow * target.player.duration;\n            if (currentTime >= Math.min(previousMarker, nextMarker) && currentTime <= Math.max(previousMarker, nextMarker)) {\n                scrolling.index = index;\n                scrolling.endTime = markers[scrolling.index];\n                scrolling.direction = direction;\n                scrolling.end = scrolling.endTime / target.player.duration;\n                // console.log('setNearestDirection', index, previousMarker, nextMarker, currentTime);\n                if (markerTime) {\n                    var trackHeight = track.offsetHeight;\n                    markerTime.setAttribute('style', 'top : ' + (scrolling.end * (trackHeight)) + 'px;');\n                }\n            }\n            console.log('setIndex', index);\n            Array.prototype.slice.call(document.querySelectorAll('[data-marker]')).filter(function (node, i) {\n                if (index === i) {\n                    node.addClass('active');\n                } else {\n                    node.removeClass('active');\n                }\n            });\n        }\n    }\n\n    function setNearestDirection(direction) {\n        var index = scrolling.index;\n        if (direction === 1) {\n            index = Math.min(markers.length - 1, scrolling.index + 1);\n        } else {\n            index = Math.max(0, scrolling.index - 1);\n        }\n        setIndex(index);\n    }\n\n    function setScroll() {\n        /*\n        var overviewHeight = overview.offsetHeight;\n        // var contentHeight = content.offsetHeight;\n        var min = 0,\n            max = overviewHeight, // (contentHeight - overviewHeight),\n            top = scrolling.end * max;\n        window.scrollTo(0, Math.max(min, Math.min(max, top)));\n        */\n    }\n\n    /*\n    function updateTime() {\n        var overviewHeight = overview.offsetHeight;\n        var contentHeight = content.offsetHeight;\n        var min = 0,\n            max = target.player.duration,\n            end = window.pageYOffset / (contentHeight - overviewHeight);\n        scrolling.end = Math.max(min, Math.min(max, end));\n        scrolling.diff = scrolling.end - scrolling.previous;\n        scrolling.direction = scrolling.diff / Math.abs(scrolling.diff);\n        scrolling.previous = scrolling.end;\n        markerTime.setAttribute('style', 'top : ' + (15 + (scrolling.end * (overviewHeight - 30))) + 'px;');\n    }\n    */\n\n    function getNearestMarker(time) {\n        var marker = markers.reduce(function (prev, curr) {\n            return (Math.abs(curr - time) < Math.abs(prev - time) ? curr : prev);\n        });\n        return marker;\n    }\n\n    function getMarker(forward) {\n        var marker = null;\n        if (Math.abs(currentMarker - target.player.currentTime) < 1.0) {\n            markers.filter(function (item) {\n                if (marker === null && (item > currentMarker || !forward)) {\n                    marker = item;\n                }\n            });\n        } else {\n            marker = currentMarker;\n        }\n        // console.log(currentMarker, target.player.currentTime);\n        return marker;\n    }\n\n    /*\n    var isPlaying = target.video.currentTime > 0 && !target.video.paused && !target.video.ended \n        && target.video.readyState > 2;\n\n    if (!isPlaying) {\n      target.video.play();\n    }\n\n    */\n\n    var eventOptions = window.PointerEvent ? {\n        passive: false,\n        capture: true,\n    } : undefined;\n\n    function onMouseDown(e) {\n        removeTouchEvents();\n        onDown(e);\n    }\n\n    function onTouchDown(e) {\n        removeMouseEvents();\n        onDown(e);\n    }\n\n    /*\n    function onTouchMove(e) {\n        console.log('onTouchMove', e.target, e);\n    }\n    */\n\n    function addMouseEvents() {\n        if (track) {\n            track.addEventListener('mousedown', onTrack, eventOptions);\n        }\n        overview.addEventListener('mousedown', onMouseDown, eventOptions);\n        overview.addEventListener('mousemove', onMove, eventOptions);\n        overview.addEventListener('wheel', onWheel);\n        window.addEventListener('mouseup', onUp, eventOptions);\n    }\n\n    function removeMouseEvents() {\n        if (track) {\n            track.removeEventListener('mousedown', onTrack);\n        }\n        overview.removeEventListener('mousedown', onMouseDown);\n        overview.removeEventListener('mousemove', onMove);\n        window.removeEventListener('mouseup', onUp);\n    }\n\n    function addTouchEvents() {\n        if (track) {\n            track.addEventListener('touchstart', onTrack, eventOptions);\n        }\n        overview.addEventListener('touchstart', onTouchDown, eventOptions);\n        overview.addEventListener('touchmove', onMove, eventOptions);\n        overview.addEventListener('touchend', onUp, eventOptions);\n    }\n\n    function removeTouchEvents() {\n        if (track) {\n            track.removeEventListener('touchstart', onTrack);\n        }\n        overview.removeEventListener('touchstart', onTouchDown);\n        overview.removeEventListener('touchmove', onMove);\n        overview.removeEventListener('touchend', onUp);\n    }\n\n    var scrollbarPaused = false;\n\n    function setScrollbar() {\n        Scrollbar.use(window.OverscrollPlugin);\n        var scrollbar = Scrollbar.init(page, {\n            plugins: {\n                overscroll: {},\n            },\n        });\n\n        function onChange(e) {\n            // console.log('scrollbar.onChange', e.offset.y, e.limit.y, native.offsetHeight);\n            var object = {\n                offset: e.offset,\n                limit: e.limit,\n                container: {\n                    width: page.offsetWidth,\n                    height: page.offsetHeight,\n                }\n            };\n            // console.log('Scrollbar.onChange', object);\n            if (!isLoaded) {\n                if (e.offset.y > 0) {\n                    body.addClass('submenu');\n                } else {\n                    body.removeClass('submenu');\n                }\n            }\n        }\n        scrollbar.addListener(onChange);\n        scrollbar.onScrollbarShouldScrollTo = function (options) {\n            // console.log('Scrollbar.onScrollbarShouldScrollTo', options);\n            if (document.querySelector(options.selector) === page) {\n                scrollbar.scrollTo(options.x || 0, options.y || 0, 500);\n            }\n        };\n        scrollbar.pause = function () {\n            /*\n            if (!scrollbarPaused) {\n                scrollbarPaused = true;\n                Scrollbar.destroy(page);\n            }\n            */\n        };\n        scrollbar.resume = function () {\n            /*\n            if (scrollbarPaused) {\n                scrollbarPaused = false;\n                scrollbar = setScrollbar();\n            }\n            */\n            return scrollbar;\n        };\n        return scrollbar;\n    }\n\n    /*\n    $(document).ready(function () {\n        var slick = $('.slick').slick({\n            infinite: false,\n            slidesToShow: 1,\n            slidesToScroll: 1,\n            vertical: true,\n            arrows: false,\n            dots: false,\n            swipe: false,\n            swipeToSlide: false,\n            verticalSwiping: false,\n        });\n    });\n    */\n\n    var svgs = Array.prototype.slice.call(document.querySelectorAll('img.svg'));\n    svgs = svgs.map(function (node) {\n        var classes = node.getAttribute('class');\n        var src = node.getAttribute('src');\n        var req = new XMLHttpRequest();\n        req.open('GET', src, true);\n        req.responseType = 'text';\n        req.onload = function () {\n            if (this.status === 200) {\n                // Get the SVG tag, ignore the rest\n                var parentNode = node.parentNode;\n                parentNode.innerHTML = this.responseText;\n                var svg = parentNode.querySelector('svg');\n                console.log(svg);\n                svg.setAttribute('class', classes);\n                // Remove any invalid XML tags as per http://validator.w3.org\n                svg.setAttribute('xmlns:a', null);\n                // Replace image with new SVG\n                // $img.replaceWith($svg);\n            }\n        };\n        req.onerror = function (e) {\n            console.log('svg.error', e);\n        };\n        req.send();\n    });\n\n    function AddReveals() {\n        var reveals = Array.prototype.slice.call(document.querySelectorAll('[data-reveal]'));\n        if (reveals.length) {\n            var revealClasses = reveals.map(function (node) {\n                return node.getAttribute('data-reveal');\n            });\n            reveals.filter(function (node) {\n                var className = node.getAttribute('data-reveal');\n                var busy;\n\n                function onOver() {\n                    if (!busy) {\n                        busy = true;\n                        if (body.idled) {\n                            body.removeClass('idle');\n                        }\n                        revealClasses.filter(function (item) {\n                            if (className === item) {\n                                body.addClass(item);\n                            } else {\n                                body.removeClass(item);\n                            }\n                        });\n                        body.idled = true;\n                        setTimeout(function () {\n                            busy = false;\n                        }, 600);\n                    }\n                }\n                node.addEventListener('mouseover', onOver);\n            });\n        }\n    }\n\n    function OverviewLogo() {\n        var logo = document.querySelector('.overview-logo');\n\n        var mouse = {\n            x: 0,\n            y: 0\n        };\n\n        function onMove(e) {\n            mouse.x = (e.clientX / window.innerWidth) - 0.5;\n            mouse.y = (e.clientY / window.innerHeight) - 0.5;\n        }\n\n        function animate() {\n            logo.setAttribute('style', 'transform: rotateX(' + mouse.y * 4 + 'deg) rotateY(' + mouse.x * 20 + 'deg);');\n            requestAnimationFrame(animate);\n        }\n        animate();\n        window.addEventListener('mousemove', onMove);\n    }\n\n    function AddSwitcher() {\n        var switcher = document.querySelector('.overview-switch');\n        var slider = document.querySelector('.switch-slider');\n        var discOverview = document.querySelector('.overview-disc');\n        var rimOverview = document.querySelector('.overview-rim');\n        var discCover = discOverview.querySelector('.cover');\n        var rimCover = rimOverview.querySelector('.cover');\n        var width = slider.offsetWidth;\n\n        var pow = {\n                x: 0,\n                y: 0\n            },\n            start = {\n                x: 0,\n                y: 0\n            },\n            direction,\n            down, move;\n\n        var x2 = 50;\n\n        function getPolygons(v) {\n            v = (v / 2) + 0.5;\n            v = Math.min(1, Math.max(0, v));\n            var x1 = v * 100;\n            if (Math.abs(x1 - x2) < 0.1) {\n                x2 = x1;\n            } else {\n                x2 += (x1 - x2) / 20;\n            }\n            return {\n                disc: 'polygon(0 0, ' + x1 + 0.01 + '% 0, ' + x2 + 0.01 + '% 100%, 0 100%)',\n                rim: 'polygon(' + x1 + '% 0, 100% 0, 100% 100%, ' + x2 + '% 100%)'\n            };\n        }\n\n        function onUpdate() {\n            slider.setAttribute('style', 'transform: translateX(' + (pow.x * width / 2) + 'px)');\n            // if (!isLoaded) {\n            var polygons = getPolygons(pow.x);\n            discOverview.setAttribute('style', 'shape-inside: ' + polygons.disc + '; clip-path: ' + polygons.disc + '; -webkit-clip-path: ' + polygons.disc + ';');\n            rimOverview.setAttribute('style', 'shape-inside: ' + polygons.rim + '; clip-path: ' + polygons.rim + '; -webkit-clip-path: ' + polygons.rim + ';');\n            var s1 = 1.1 - (pow.x + 1) / 2 * 0.1;\n            var s2 = 1 + (pow.x + 1) / 2 * 0.1;\n            var b1 = 20 * (pow.x < 0 ? Math.abs(pow.x) : 0) + 'px';\n            var b2 = 20 * (pow.x > 0 ? Math.abs(pow.x) : 0) + 'px';\n            discCover.setAttribute('style', 'transform: scale(' + s1 + '); filter: blur(' + b1 + ');');\n            rimCover.setAttribute('style', 'transform: scale(' + s2 + '); filter: blur(' + b2 + ');');\n            // }\n        }\n\n        function animate() {\n            onUpdate();\n            requestAnimationFrame(animate);\n        }\n        animate();\n        window.addEventListener('mousemove', onMove);\n\n        function onDown(e) {\n            if (!isLoading) {\n                isSwitching = true;\n                start.x = pow.x;\n                start.y = pow.y;\n                down = getMouse(e);\n                if (isLoaded) {\n                    onLoop(disc);\n                    onLoop(rim);\n                }\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n\n        function onMove(e) {\n            if (down) {\n                move = getMouse(e);\n                var end = start.x + (move.x - down.x) / (width / 2);\n                end = Math.max(-1, Math.min(1, end));\n                direction = end > pow.x ? 1 : -1;\n                pow.x = end;\n                onUpdate();\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n\n        var positions = [-1, 0, 1];\n\n        function onUp(e) {\n            if (move) {\n                move = null;\n                down = null;\n                var end = positions.reduce(function (a, b) {\n                    if (Math.abs(a - pow.x) < Math.abs(b - pow.x)) {\n                        return a;\n                    } else {\n                        return b;\n                    }\n                });\n                var shouldLoad = false;\n                if (end !== 0 && positions.length === 3) {\n                    positions = [-1, 1];\n                    shouldLoad = true;\n                }\n                if (positions.length == 2) {\n                    target = end === -1 ? rim : disc;\n                }\n                direction = end > pow.x ? 1 : -1;\n                TweenLite.to(pow, 1, {\n                    x: end,\n                    ease: Elastic.easeOut,\n                    onUpdate: onUpdate,\n                    onComplete: function () {\n                        if (shouldLoad) {\n                            StartLoading();\n                        }\n                    },\n                });\n            }\n            isSwitching = false;\n            removeListeners();\n        }\n\n        function onResize() {\n            width = slider.offsetWidth;\n            onUpdate();\n        }\n\n        function onMouseDown(e) {\n            onDown(e);\n            addMouseListeners();\n        }\n\n        function onTouchDown(e) {\n            onDown(e);\n            addTouchListeners();\n        }\n\n        function addMouseListeners() {\n            window.addEventListener('mousemove', onMove);\n            window.addEventListener('mouseup', onUp);\n        }\n\n        function addTouchListeners() {\n            window.addEventListener('touchmove', onMove);\n            window.addEventListener('touchend', onUp);\n        }\n\n        function removeListeners() {\n            window.removeEventListener('mousemove', onMove);\n            window.removeEventListener('mouseup', onUp);\n            window.removeEventListener('touchmove', onMove);\n            window.removeEventListener('touchend', onUp);\n        }\n\n        switcher.addEventListener('mousedown', onMouseDown);\n        switcher.addEventListener('touchstart', onTouchDown);\n        window.addEventListener('resize', onResize);\n    }\n\n    function ScrollTo() {\n        var scrolltos = Array.prototype.slice.call(document.querySelectorAll('[scroll-to]')).map(function (node, index) {\n            node.addEventListener('click', function (e) {\n                var href = node.getAttribute('href');\n                var target = document.querySelector(href);\n                if (target) {\n                    var top = target.offsetTop;\n                    scrollbar.scrollTo(0, top, 600, {\n                        callback: function () {\n                            console.log('ScrollTo.complete', top);\n                        },\n                        // easing: easing.easeOutBack,\n                    });\n                }\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                return false;\n            });\n            return node;\n        });\n    }\n\n    ScrollTo();\n    OverviewLogo();\n    AddSwitcher();\n    // AddReveals();\n\n}());\n\n/*\nfunction() {\n    function t(e) {\n        s()(this, t), this.createBound(), this.content = e.querySelector(\".js-scroll-content\"), this.el = this.content.querySelector(\".js-scroll-section\"), this.rAF = void 0, this.options = {\n            current: 0,\n            last: 0,\n            ease: this.el.dataset.ease || .15\n        }, this.wh = window.innerHeight, this.setHeight()\n    }\n    return o()(t, [{\n        key: \"init\",\n        value: function() {\n            this.addEvents(), this.preload()\n        }\n    }, {\n        key: \"createBound\",\n        value: function() {\n            var t = this;\n            [\"setHeight\", \"scroll\", \"run\"].forEach(function(e) {\n                return t[e] = t[e].bind(t)\n            })\n        }\n    }, {\n        key: \"setHeight\",\n        value: function() {\n            var t = this.content.getBoundingClientRect().height;\n            c.a.set(document.body, {\n                height: t\n            })\n        }\n    }, {\n        key: \"preload\",\n        value: function() {\n            var t = this;\n            u()(this.content, function(e) {\n                t.setHeight()\n            })\n        }\n    }, {\n        key: \"scroll\",\n        value: function() {\n            this.options.current = window.scrollY\n        }\n    }, {\n        key: \"run\",\n        value: function() {\n            this.options.last = Object(d.a)(this.options.last, this.options.current, this.options.ease), this.options.last = Math.floor(100 * this.options.last) / 100;\n            var t = +((this.options.current - this.options.last) / this.wh);\n            c.a.set(this.el, {\n                y: -this.options.last,\n                skewY: 10 * t\n            }), this.rAF = requestAnimationFrame(this.run)\n        }\n    }, {\n        key: \"on\",\n        value: function() {\n            (!(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]) && this.requestAnimationFrame()\n        }\n    }, {\n        key: \"off\",\n        value: function() {\n            (!(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0]) && this.cancelAnimationFrame()\n        }\n    }, {\n        key: \"requestAnimationFrame\",\n        value: function(t) {\n            function e() {\n                return t.apply(this, arguments)\n            }\n            return e.toString = function() {\n                return t.toString()\n            }, e\n        }(function() {\n            this.rAF = requestAnimationFrame(this.run)\n        })\n    }, {\n        key: \"cancelAnimationFrame\",\n        value: function(t) {\n            function e() {\n                return t.apply(this, arguments)\n            }\n            return e.toString = function() {\n                return t.toString()\n            }, e\n        }(function() {\n            cancelAnimationFrame(this.rAF)\n        })\n    }, {\n        key: \"destroy\",\n        value: function() {\n            c.a.set(document.body, {\n                height: \"auto\"\n            }), this.el = void 0, this.removeEvents()\n        }\n    }, {\n        key: \"addEvents\",\n        value: function() {\n            this.on(), window.addEventListener(\"resize\", this.setHeight, !1), window.addEventListener(\"scroll\", this.scroll, !1)\n        }\n    }, {\n        key: \"removeEvents\",\n        value: function() {\n            this.off(), window.removeEventListener(\"resize\", this.setHeight, !1), window.removeEventListener(\"scroll\", this.scroll, !1)\n        }\n    }])\n*/"]}