{"version":3,"sources":["docs/js/app.js"],"names":["Element","prototype","hasClass","name","RegExp","test","this","className","addClass","removeClass","split","join","replace","isDescendant","target","node","parentNode","window","getMouse","e","y","touches","pageY","clientY","x","pageX","clientX","formMultiple","document","querySelector","onMultiple","onDown","addEventListener","navContainer","Scrollbar","use","OverscrollPlugin","init","plugins","overscroll","options","Array","slice","call","querySelectorAll","filter","option","index","onToggle","brands","input","active","item","map","innerHTML","value","length","console","log","onMouseToggle","removeEventListener","onTouchToggle","navigator","userAgent","MSStream","fps","totalFrames","duration","mouseDownY","isChrome","vendor","useImages","concurrent","scrolling","pow","end","endTime","previous","direction","diff","body","page","overview","preloadPercent","track","steps","playerTime","markerTime","scrolltos","markers","skip","Math","abs","setIndex","second","player","preventDefault","stopImmediatePropagation","onMouseDown","onTouchDown","parseFloat","getAttribute","disc","source","video","pictures","captionItems","images","rim","frames","scrollbar","addListener","offset","limit","offsetWidth","offsetHeight","isLoaded","activeNode","href","top","offsetTop","reduce","a","b","onScrollbarShouldScrollTo","selector","scrollTo","setScrollbar","isLoading","isSwitching","StartLoading","currentTime","play","pause","setTime","i","max","min","round","src","total","loaded","frame","requests","onCheckNextImage","push","onLoadNextImage","req","XMLHttpRequest","open","jpg","responseType","onload","status","blob","response","image","URL","createObjectURL","shift","setProgress","Init","onerror","send","PreloadImages","PreloadVideoTarget","promise","undefined","then","catch","error","percent","parseInt","setAttribute","callback","webm","mp4","onprogress","videoBlob","autoplay","mute","html","toFixed","addSteps","onTrack","eventOptions","onMove","onWheel","onUp","addMouseEvents","addTouchEvents","onscroll","onScroll","requestAnimationFrame","animate","onLoop","mouseMove","paused","step","setTop","markerIndex","marker","currentIndex","caption","distance","fpow","tpow","timeapi","peformance","performance","Date","fpsInterval","now","elapsed","children","indexOf","getY","innerHeight","shouldLockScroll","flag","previousY","scrubStart","stopPropagation","time","setNearestDirection","wheelDirection","deltaY","previousMarker","nextMarker","PointerEvent","passive","capture","removeTouchEvents","removeMouseEvents","swiper","svgs","classes","responseText","svg","loading","letters","InitLoading","toggle","down","move","switcher","slider","discOverview","rimOverview","discCover","rimCover","width","start","x2","onUpdate","polygons","v","x1","getPolygons","s1","s2","b1","b2","positions","shouldLoad","TweenLite","to","ease","Elastic","easeOut","onComplete","tapped","btn","previousTarget","previousDirection","InitSwitch","Swiper","loop","pagination","el","navigation","nextEl","prevEl","on","button","activeIndex","slideTo","InitMenu"],"mappings":"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","file":"app.min.js","sourcesContent":["/* global window, document, console  */\n\n(function () {\n    'use strict';\n\n    Element.prototype.hasClass = function (name) {\n        return new RegExp(\"(?:^|\\\\s+)\" + name + \"(?:\\\\s+|$)\").test(this.className);\n    };\n\n    Element.prototype.addClass = function (name) {\n        if (!this.hasClass(name)) {\n            this.className = this.className ? (this.className + ' ' + name) : name;\n        }\n    };\n\n    Element.prototype.removeClass = function (name) {\n        if (this.hasClass(name)) {\n            this.className = this.className.split(name).join('').replace(/\\s\\s+/g, ' '); // .replace(new RegExp('(?:^|\\\\s+)' + name + '(?:\\\\s+|$)', 'g'), '');\n        }\n    };\n\n    Element.prototype.isDescendant = function (target) {\n        function isDescendant(node, target) {\n            if (node === target) {\n                return true;\n            } else if (node.parentNode) {\n                return isDescendant(node.parentNode, target);\n            } else {\n                return false;\n            }\n        }\n        return isDescendant(this, target);\n    };\n\n    window.getMouse = function (e) {\n        var y = 0.0;\n        if (e.touches) {\n            y = e.touches[0].pageY;\n        } else {\n            y = e.clientY;\n        }\n        var x = 0.0;\n        if (e.touches) {\n            x = e.touches[0].pageX;\n        } else {\n            x = e.clientX;\n        }\n        var mouse = {\n            x: x,\n            y: y\n        };\n        // console.log('getMouse', mouse);\n        return mouse;\n    };\n\n}());\n/* global window, document, console, TweenLite */\n\n(function () {\n    'use strict';\n\n    var formMultiple = document.querySelector('.form-group-multiple');\n\n    function onMultiple() {\n        formMultiple.addClass('active');\n    }\n\n    function onDown(e) {\n        if (!e.target.isDescendant(formMultiple)) {\n            formMultiple.removeClass('active');\n        }\n    }\n    formMultiple.addEventListener('mousedown', onMultiple);\n    formMultiple.addEventListener('touchstart', onMultiple);\n    window.addEventListener('mousedown', onDown);\n    window.addEventListener('touchstart', onDown);\n\n    var navContainer = document.querySelector('.nav-container');\n    Scrollbar.use(window.OverscrollPlugin);\n    var scrollbar = Scrollbar.init(navContainer, {\n        plugins: {\n            overscroll: {},\n        },\n    });\n\n    var options = Array.prototype.slice.call(document.querySelectorAll('.nav-multiple li'));\n\n    function setValue() {\n        var brands = options.filter(function (item) {\n            return item.active;\n        }).map(function (item) {\n            return item.querySelector('span').innerHTML;\n        });\n        var input = document.querySelector('input[name=\"Brands\"]');\n        input.value = brands.length > 0 ? brands.join(', ') : null;\n        console.log('setValue', brands, input.value);\n        // console.log('setValue', input.value, input);\n    }\n\n    options.filter(function (option, index) {\n        function onToggle(e) {\n            option.active = !option.active;\n            if (option.active) {\n                option.addClass('active');\n            } else {\n                option.removeClass('active');\n            }\n            setValue();\n        }\n\n        function onMouseToggle(e) {\n            option.removeEventListener('touchstart', onTouchToggle);\n            onToggle(e);\n        }\n\n        function onTouchToggle(e) {\n            option.removeEventListener('mousedown', onMouseToggle);\n            onToggle(e);\n        }\n        option.addEventListener('mousedown', onMouseToggle);\n        option.addEventListener('touchstart', onTouchToggle);\n    });\n\n}());\n/* global window, document, console, TweenLite */\n\n(function () {\n    'use strict';\n\n    var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n    var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n    var useImages = false;\n\n    var fps, totalFrames, duration;\n\n    var currentTime = 0.0;\n    var pageOffset = 0.0;\n    var currentMarker = 0.0;\n    var concurrent = 15;\n\n    var speed, mouseDownY;\n    var scrolling = {\n        pow: 0,\n        end: 0,\n        endTime: 0,\n        previous: 0,\n        direction: 0,\n        diff: 0,\n        index: 0,\n    };\n\n    var body = document.querySelector('body');\n    var page = document.querySelector('.page');\n    var overview = document.querySelector('.section-overview');\n    var preloadPercent = document.querySelector('.preload .percent');\n    var track = document.querySelector('.track');\n    var steps = document.querySelector('.steps');\n    var playerTime = document.querySelector('.player-time');\n    var markerTime = document.querySelector('.marker-time');\n    var scrolltos = Array.prototype.slice.call(document.querySelectorAll('[scroll-to]'));\n    var markers = Array.prototype.slice.call(document.querySelectorAll('[data-marker]')).map(function (node, index) {\n        function onDown(e) {\n            var skip = Math.abs(scrolling.index - index) > 1;\n            setIndex(index, skip);\n            if (skip) {\n                var second = 1 / target.player.duration;\n                scrolling.pow = scrolling.end - second;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            return false;\n        }\n\n        function onMouseDown(e) {\n            node.removeEventListener('touchstart', onTouchDown);\n            return onDown(e);\n        }\n\n        function onTouchDown(e) {\n            node.removeEventListener('mousedown', onMouseDown);\n            return onDown(e);\n        }\n        node.addEventListener('mousedown', onMouseDown);\n        node.addEventListener('touchstart', onTouchDown);\n        return parseFloat(node.getAttribute('data-marker'));\n    });\n    console.log('markers', markers);\n\n    var disc = {\n        source: window.options.disc,\n        video: document.querySelector('.overview-disc .video'),\n        pictures: document.querySelector('.overview-disc .pictures'),\n        captionItems: Array.prototype.slice.call(document.querySelectorAll('.overview-disc .captions-item')),\n        images: [],\n    };\n    var rim = {\n        source: window.options.rim,\n        video: document.querySelector('.overview-rim .video'),\n        pictures: document.querySelector('.overview-rim .pictures'),\n        captionItems: Array.prototype.slice.call(document.querySelectorAll('.overview-rim .captions-item')),\n        images: [],\n    };\n    fps = window.options.fps;\n    totalFrames = window.options.frames;\n    duration = totalFrames / fps;\n    var target = null;\n\n    var scrollbar = setScrollbar();\n    var isLoading = false,\n        isLoaded = false,\n        isSwitching = false;\n\n    function StartLoading() {\n        body.addClass('loading');\n        isLoading = true;\n        if (useImages) {\n            body.addClass('use-pictures');\n            disc.player = disc.pictures;\n            disc.player.currentTime = 0.0;\n            disc.player.duration = duration;\n            disc.player.play = disc.player.pause = function () {};\n            disc.player.setTime = function () {\n                var i = Math.max(1, Math.min(totalFrames, Math.round(disc.player.currentTime * fps)));\n                if (disc.player.index !== i) {\n                    disc.player.index = i;\n                    // console.log(i, disc.pictures[i]);\n                    disc.player.src = disc.images[i];\n                }\n            };\n            rim.player = rim.pictures;\n            rim.player.currentTime = 0.0;\n            rim.player.duration = duration;\n            rim.player.play = rim.player.pause = function () {};\n            rim.player.setTime = function () {\n                var i = Math.max(1, Math.min(totalFrames, Math.round(rim.player.currentTime * fps)));\n                if (rim.player.index !== i) {\n                    rim.player.index = i;\n                    // console.log(i, rim.pictures[i]);\n                    rim.player.src = rim.images[i];\n                }\n            };\n            PreloadImages();\n        } else {\n            body.addClass('use-video');\n            disc.player = disc.video;\n            disc.player.setTime = function () {};\n            rim.player = rim.video;\n            rim.player.setTime = function () {};\n            PreloadVideo();\n        }\n    }\n\n    function addSteps() {\n        for (var i = 0; i < markers.length; i++) {\n            var marker = markers[i];\n            var html = '<div class=\"step\" style=\"top:' + (marker / duration * 100).toFixed(3) + '%\"></div>';\n            steps.innerHTML += html;\n            // console.log(steps, html);\n        }\n    }\n\n    function setProgress(loaded, total) {\n        var progress = loaded / total;\n        var percent = parseInt(progress * 100);\n        if (preloadPercent) {\n            preloadPercent.setAttribute('style', 'width:' + percent + '%;');\n            // console.log(percent);\n        }\n    }\n\n    function PreloadImages() {\n        // solo 1 video\n        var total = totalFrames;\n        var loaded = 0;\n        var frame = 0;\n        var requests = [];\n\n        function onCheckNextImage() {\n            while (requests.length < concurrent && frame < total) {\n                requests.push(true);\n                onLoadNextImage(++frame);\n            }\n        }\n\n        function onLoadNextImage(frame) {\n            var req = new XMLHttpRequest();\n            req.open('GET', target.source.jpg.split('{0}').join(frame), true);\n            req.responseType = 'blob';\n            req.onload = function () {\n                if (this.status === 200) {\n                    var blob = this.response;\n                    var image = URL.createObjectURL(blob); // IE10+\n                    images[frame] = image;\n                    loaded++;\n                    requests.shift();\n                    setProgress(loaded, total);\n                    if (loaded === total) {\n                        target.player.setTime();\n                        Init();\n                    } else {\n                        onCheckNextImage();\n                    }\n                }\n            };\n            req.onerror = function (e) {\n                console.log('preload.error', e);\n            };\n            req.send();\n        }\n        onCheckNextImage();\n    }\n\n    function InitVideo() {\n        var promise = target.video.play();\n        if (promise !== undefined) {\n            promise.then(function () {\n                Init();\n            }).catch(function (e) {\n                console.log('video.error', e, target.video.error);\n            });\n        } else {\n            Init();\n        }\n    }\n\n    function PreloadVideoTarget(target, callback) {\n        var req = new XMLHttpRequest();\n        req.open('GET', isChrome ? target.source.webm : target.source.mp4, true);\n        req.responseType = 'blob';\n        req.onprogress = function (e) {\n            setProgress(e.loaded, e.total);\n        };\n        req.onload = function () {\n            if (this.status === 200) {\n                var videoBlob = this.response;\n                var source = URL.createObjectURL(videoBlob); // IE10+\n                target.video.addEventListener('progress', function (e) {\n                    console.log('video.progress', e, target.video.duration);\n                }, false);\n                target.video.addEventListener('error', function (e) {\n                    console.log('video.error', e, target.video.error);\n                });\n                target.video.autoplay = true;\n                target.video.mute = true;\n                target.video.src = source;\n                if (callback) {\n                    callback();\n                }\n            }\n        };\n        req.onerror = function (e) {\n            console.log('preload.error', e);\n        };\n        req.send();\n    }\n\n    function PreloadVideo() {\n        PreloadVideoTarget(disc, function () {\n            PreloadVideoTarget(rim, function () {\n                InitVideo();\n            });\n        });\n        return;\n        /*\n        console.log('PreloadVideo', target);\n        var req = new XMLHttpRequest();\n        req.open('GET', isChrome ? target.source.webm : target.source.mp4, true);\n        req.responseType = 'blob';\n        req.onprogress = function (e) {\n            setProgress(e.loaded, e.total);\n        };\n        req.onload = function () {\n            if (this.status === 200) {\n                var videoBlob = this.response;\n                var source = URL.createObjectURL(videoBlob); // IE10+\n                target.video.addEventListener('progress', function (e) {\n                    console.log('video.progress', e, target.video.duration);\n                }, false);\n                target.video.addEventListener('error', function (e) {\n                    console.log('video.error', e, target.video.error);\n                });\n                target.video.autoplay = true;\n                target.video.mute = true;\n                target.video.src = source;\n                InitVideo();\n            }\n        };\n        req.onerror = function (e) {\n            console.log('preload.error', e);\n        };\n        req.send();\n        */\n    }\n\n    function Init() {\n        isLoading = false;\n        isLoaded = true;\n        body.removeClass('loading');\n        body.addClass('loaded');\n        body.addClass('submenu');\n\n        scrolling.pow = scrolling.end = 0;\n        speed = 0.0;\n        mouseDownY = null;\n\n        target.video.pause();\n\n        if (steps) {\n            addSteps();\n        }\n\n        addMouseEvents();\n        addTouchEvents();\n\n        window.onscroll = onScroll;\n        // setInterval(onLoop, 1000.0 / fps);\n        window.requestAnimationFrame(animate);\n\n        console.log(target.video.duration);\n        setIndex(1);\n    }\n\n    function elastic(pow) {\n        var accelamount = 0.05; //How fast the video will try to catch up with the target position. 1 = instantaneous, 0 = do nothing.\n        var bounceamount = 0.7; //value from 0 to 1 for how much backlash back and forth you want in the easing. 0 = no bounce whatsoever, 1 = lots and lots of bounce\n        speed += (scrolling.end - pow) * accelamount;\n        speed = Math.max(-1, Math.min(1, speed));\n        pow = (pow + speed) * (bounceamount) + (scrolling.end * (1 - bounceamount));\n        return pow;\n    }\n\n    function setCaptionItems(direction) {\n        target.captionItems.filter(function (caption, index) {\n            var distance = markers[index] - scrolling.pow * target.player.duration;\n            if (Math.abs(distance) > 2) {\n                caption.setAttribute('class', 'captions-item');\n            } else if (direction > 0) {\n                caption.setAttribute('class', 'captions-item ' + (distance > -0.1 ? 'entering' : 'exiting'));\n            } else if (direction < 0) {\n                caption.setAttribute('class', 'captions-item ' + (distance < 0.1 ? 'entering' : 'exiting'));\n            }\n        });\n    }\n\n    function onLoop(target) {\n        if (target.player.duration) {\n            if (mouseMove) {\n                target.player.pause();\n                scrolling.pow = scrolling.end;\n                target.player.currentTime = scrolling.pow * target.player.duration;\n                target.player.setTime();\n            } else {\n                if (scrolling.end !== scrolling.pow) {\n                    if (!target.player.paused) {\n                        target.player.pause();\n                    }\n                    var diff = scrolling.end - scrolling.pow;\n                    var step = 1.0 / fps;\n                    if (Math.abs(diff * target.player.duration) < step) {\n                        scrolling.pow = scrolling.end;\n                    } else {\n                        var direction = diff ? diff / Math.abs(diff) : 0;\n                        scrolling.pow += (step * direction) / target.player.duration;\n                    }\n                    var currentTime = Math.round(scrolling.pow * target.player.duration / step) * step + 0.00001;\n                    target.player.currentTime = currentTime;\n                    target.player.setTime();\n                }\n            }\n            setTop(playerTime, scrolling.pow);\n            setMarkers(scrolling.pow);\n            setCaptionItems(scrolling.direction);\n        }\n    }\n\n    var currentIndex = -1;\n\n    function setMarkers(pow) {\n        var markerIndex = 0;\n        markers.filter(function (marker, i) {\n            if (marker <= pow * target.player.duration) {\n                markerIndex = i;\n            }\n        });\n        if (currentIndex !== markerIndex) {\n            currentIndex = markerIndex;\n            Array.prototype.slice.call(document.querySelectorAll('[data-marker]')).filter(function (node, i) {\n                if (i === currentIndex) {\n                    node.addClass('active');\n                } else {\n                    node.removeClass('active');\n                }\n            });\n        }\n    }\n\n    function setTop(node, pow) {\n        if (node && target.player.duration) {\n            var i = 0,\n                fpow = 0,\n                tpow = 0;\n            markers.filter(function (marker, index) {\n                if (marker <= pow * target.player.duration) {\n                    i = index;\n                }\n            });\n            fpow = markers[i] / target.player.duration;\n            tpow = i < markers.length - 1 ? markers[i + 1] / target.player.duration : fpow;\n            var step = 60;\n            pow = fpow !== tpow ? ((pow - fpow) / (tpow - fpow)) : 0;\n            var top = step / 2 + step * i + pow * step;\n            node.setAttribute('style', 'top:' + (top - 10) + 'px;');\n        }\n    }\n\n    var timeapi = window.peformance ? performance : Date;\n    var fpsInterval = 1000 / fps,\n        now = 0,\n        then = 0,\n        elapsed = 0;\n\n    function animate() {\n        // calc elapsed time since last loop\n        now = timeapi.now();\n        elapsed = now - then;\n        // if enough time has elapsed, draw the next frame\n\n        if (elapsed > fpsInterval) {\n\n            // Get ready for next frame by setting then=now, but also adjust for your\n            // specified fpsInterval not being a multiple of RAF's interval (16.7ms)\n            then = now - (elapsed % fpsInterval);\n\n            // Put your drawing code here\n            onLoop(disc);\n            onLoop(rim);\n        }\n        // request another frame\n        requestAnimationFrame(animate);\n    }\n\n    function onTrack(e) {\n        if (!isSwitching) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            if (e.target.getAttribute('class') === 'step') {\n                var nodes = Array.prototype.slice.call(e.target.parentNode.children);\n                var index = nodes.indexOf(e.target);\n                setIndex(index);\n            }\n            return false;\n        }\n    }\n\n    function getY(e) {\n        var y = 0.0;\n        if (e.touches) {\n            y = e.touches[0].pageY;\n        } else {\n            y = e.clientY;\n        }\n        return Math.max(0, Math.min(window.innerHeight, y));\n    }\n\n    function shouldLockScroll(direction) {\n        var flag = false;\n        if ((scrolling.pow < 1.0 && direction === 1) || ((!scrollbar || scrollbar.offset.y < 10) && direction === -1)) {\n            flag = true;\n        }\n        console.log('shouldLockScroll', scrolling.pow, direction);\n        return flag;\n    }\n\n    var mouseMove = false,\n        previousY,\n        scrubStart = 0.0;\n\n    function onDown(e) {\n        if (scrollbar.offset.y < 10) {\n            // console.log('scrub.onDown');\n            var y = getY(e);\n            previousY = null;\n            mouseDownY = y;\n            scrubStart = scrolling.end || 0;\n        }\n    }\n\n    function onMove(e) {\n        if (isSwitching) {\n            previousY = null;\n            mouseDownY = null;\n            return;\n        }\n        if (mouseDownY) {\n            var y = getY(e);\n            // console.log('onMove', y);\n            previousY = y;\n            if (Math.abs(mouseDownY - y) > 1) {\n                var min = 0,\n                    max = 1,\n                    pow = (mouseDownY - y) / (window.innerHeight * 3);\n                scrolling.end = Math.max(0, Math.min(1, scrubStart + pow));\n                // console.log('onMove', scrubStart, pow);\n                mouseMove = true;\n                setScroll();\n            }\n            var direction = y - mouseDownY > 0 ? -1 : 1;\n            if (shouldLockScroll(direction)) {\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n    }\n\n    function onUp(e) {\n        if (mouseMove) {\n            var y = previousY;\n            // console.log('onUp', y);\n            var diff = (mouseDownY - y);\n            // console.log(y, mouseDownY, diff);\n            if (diff) {\n                var direction = diff / Math.abs(diff);\n                var time = scrolling.end * target.player.duration;\n                markers.filter(function (item, index) {\n                    if (time > item && time < markers[index + 1]) {\n                        scrolling.index = index + (direction > 0 ? 0 : 1);\n                        // console.log('scrolling.index', scrolling.index);\n                    }\n                });\n                setNearestDirection(direction);\n                setScroll();\n            }\n        }\n        mouseMove = false;\n        mouseDownY = null;\n    }\n\n    function onWheel(e) {\n        var wheelDirection = e.deltaY / Math.abs(e.deltaY);\n        setNearestDirection(wheelDirection);\n        setScroll();\n        if (shouldLockScroll(wheelDirection)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            // console.log('onWheel', e);\n            return false;\n        }\n    }\n\n    function onScroll() {\n        setTop(markerTime, scrolling.end);\n    }\n\n    function setIndex(index, skip) {\n        if (index !== scrolling.index) {\n            var direction = (index - scrolling.index) / Math.abs(index - scrolling.index);\n            var previousMarker = markers[scrolling.index];\n            var nextMarker = markers[index];\n            var currentTime = scrolling.pow * target.player.duration;\n            if (skip || currentTime >= Math.min(previousMarker, nextMarker) && currentTime <= Math.max(previousMarker, nextMarker)) {\n                scrolling.index = index;\n                scrolling.endTime = markers[scrolling.index];\n                scrolling.direction = direction;\n                scrolling.end = scrolling.endTime / target.player.duration;\n                setTop(markerTime, scrolling.end);\n            }\n            console.log('setIndex', index);\n        }\n    }\n\n    function setNearestDirection(direction) {\n        var index = scrolling.index;\n        if (direction === 1) {\n            index = Math.min(markers.length - 1, scrolling.index + 1);\n        } else {\n            index = Math.max(0, scrolling.index - 1);\n        }\n        setIndex(index);\n    }\n\n    function setScroll() {\n        /*\n        var overviewHeight = overview.offsetHeight;\n        // var contentHeight = content.offsetHeight;\n        var min = 0,\n            max = overviewHeight, // (contentHeight - overviewHeight),\n            top = scrolling.end * max;\n        window.scrollTo(0, Math.max(min, Math.min(max, top)));\n        */\n    }\n\n    function getNearestMarker(time) {\n        var marker = markers.reduce(function (prev, curr) {\n            return (Math.abs(curr - time) < Math.abs(prev - time) ? curr : prev);\n        });\n        return marker;\n    }\n\n    function getMarker(forward) {\n        var marker = null;\n        if (Math.abs(currentMarker - target.player.currentTime) < 1.0) {\n            markers.filter(function (item) {\n                if (marker === null && (item > currentMarker || !forward)) {\n                    marker = item;\n                }\n            });\n        } else {\n            marker = currentMarker;\n        }\n        // console.log(currentMarker, target.player.currentTime);\n        return marker;\n    }\n\n    var eventOptions = window.PointerEvent ? {\n        passive: false,\n        capture: true,\n    } : undefined;\n\n    function onMouseDown(e) {\n        removeTouchEvents();\n        onDown(e);\n    }\n\n    function onTouchDown(e) {\n        removeMouseEvents();\n        onDown(e);\n    }\n\n    function addMouseEvents() {\n        if (track) {\n            track.addEventListener('mousedown', onTrack, eventOptions);\n        }\n        overview.addEventListener('mousedown', onMouseDown, eventOptions);\n        overview.addEventListener('mousemove', onMove, eventOptions);\n        overview.addEventListener('wheel', onWheel);\n        window.addEventListener('mouseup', onUp, eventOptions);\n    }\n\n    function removeMouseEvents() {\n        if (track) {\n            track.removeEventListener('mousedown', onTrack);\n        }\n        overview.removeEventListener('mousedown', onMouseDown);\n        overview.removeEventListener('mousemove', onMove);\n        window.removeEventListener('mouseup', onUp);\n    }\n\n    function addTouchEvents() {\n        if (track) {\n            track.addEventListener('touchstart', onTrack, eventOptions);\n        }\n        overview.addEventListener('touchstart', onTouchDown, eventOptions);\n        overview.addEventListener('touchmove', onMove, eventOptions);\n        overview.addEventListener('touchend', onUp, eventOptions);\n    }\n\n    function removeTouchEvents() {\n        if (track) {\n            track.removeEventListener('touchstart', onTrack);\n        }\n        overview.removeEventListener('touchstart', onTouchDown);\n        overview.removeEventListener('touchmove', onMove);\n        overview.removeEventListener('touchend', onUp);\n    }\n\n    var scrollbarPaused = false;\n\n    function setScrollbar() {\n        Scrollbar.use(window.OverscrollPlugin);\n        var scrollbar = Scrollbar.init(page, {\n            plugins: {\n                overscroll: {},\n            },\n        });\n\n        function onChange(e) {\n            // console.log('scrollbar.onChange', e.offset.y, e.limit.y, native.offsetHeight);\n            var object = {\n                offset: e.offset,\n                limit: e.limit,\n                container: {\n                    width: page.offsetWidth,\n                    height: page.offsetHeight,\n                }\n            };\n            // console.log('Scrollbar.onChange', object);\n            if (!isLoaded) {\n                if (e.offset.y > 0) {\n                    body.addClass('submenu');\n                } else {\n                    body.removeClass('submenu');\n                }\n            }\n            var activeNode = scrolltos.filter(function (node, index) {\n                var href = node.getAttribute('href');\n                var target = document.querySelector(href);\n                node.removeClass('active');\n                if (target) {\n                    var top = target.offsetTop - e.offset.y;\n                    node.top = top;\n                    /*\n                    if (top < window.innerHeight) {\n                        node.addClass('active');\n                    } else {\n                        node.removeClass('active');\n                    }\n                    */\n                    return true;\n                } else {\n                    return false;\n                }\n            }).reduce(function (a, b) {\n                if (Math.abs(b.top) < Math.abs(a.top) && b.top < 80) {\n                    return b;\n                } else {\n                    return a;\n                }\n            });\n            if (activeNode) {\n                activeNode.addClass('active');\n            }\n        }\n        scrollbar.addListener(onChange);\n        scrollbar.onScrollbarShouldScrollTo = function (options) {\n            // console.log('Scrollbar.onScrollbarShouldScrollTo', options);\n            if (document.querySelector(options.selector) === page) {\n                scrollbar.scrollTo(options.x || 0, options.y || 0, 500);\n            }\n        };\n        return scrollbar;\n    }\n\n    var svgs = Array.prototype.slice.call(document.querySelectorAll('img.svg'));\n    svgs = svgs.map(function (node) {\n        var classes = node.getAttribute('class');\n        var src = node.getAttribute('src');\n        var req = new XMLHttpRequest();\n        req.open('GET', src, true);\n        req.responseType = 'text';\n        req.onload = function () {\n            if (this.status === 200) {\n                // Get the SVG tag, ignore the rest\n                var parentNode = node.parentNode;\n                parentNode.innerHTML = this.responseText;\n                var svg = parentNode.querySelector('svg');\n                console.log(svg);\n                svg.setAttribute('class', classes);\n                // Remove any invalid XML tags as per http://validator.w3.org\n                svg.setAttribute('xmlns:a', null);\n                // Replace image with new SVG\n                // $img.replaceWith($svg);\n            }\n        };\n        req.onerror = function (e) {\n            console.log('svg.error', e);\n        };\n        req.send();\n    });\n\n    function OverviewLogo() {\n        var logo = document.querySelector('.overview-logo');\n\n        var mouse = {\n            x: 0,\n            y: 0\n        };\n\n        function onMove(e) {\n            mouse.x = (e.clientX / window.innerWidth) - 0.5;\n            mouse.y = (e.clientY / window.innerHeight) - 0.5;\n        }\n\n        function animate() {\n            logo.setAttribute('style', 'transform: rotateX(' + mouse.y * 4 + 'deg) rotateY(' + mouse.x * 20 + 'deg);');\n            requestAnimationFrame(animate);\n        }\n        animate();\n        window.addEventListener('mousemove', onMove);\n    }\n\n    function InitLoading() {\n        var loading = document.querySelector('.switch-loading');\n        if (loading) {\n            var letters = loading.innerHTML;\n            loading.innerHTML = '<span>' + letters.split('').join('</span><span>') + '</span>';\n        }\n    }\n\n    function InitScrollTo() {\n        scrolltos.filter(function (node, index) {\n            node.addEventListener('click', function (e) {\n                //\n                var toggle = document.querySelector('.btn-toggle');\n                toggle.active = false;\n                body.removeClass('submenu-active');\n                toggle.removeClass('active');\n                //                \n                var href = node.getAttribute('href');\n                var target = document.querySelector(href);\n                if (target) {\n                    var top = target.offsetTop;\n                    scrollbar.scrollTo(0, top, 600, {\n                        callback: function () {\n                            console.log('ScrollTo.complete', top);\n                        },\n                        // easing: easing.easeOutBack,\n                    });\n                }\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                return false;\n            });\n        });\n    }\n\n    function InitSwitch() {\n        var switcher = document.querySelector('.overview-switch');\n        var slider = document.querySelector('.switch-slider');\n        var discOverview = document.querySelector('.overview-disc');\n        var rimOverview = document.querySelector('.overview-rim');\n        var discCover = discOverview.querySelector('.cover');\n        var rimCover = rimOverview.querySelector('.cover');\n        var width = slider.offsetWidth;\n\n        var pow = {\n                x: 0,\n                y: 0\n            },\n            start = {\n                x: 0,\n                y: 0\n            },\n            direction = 0,\n            down, move;\n\n        var x2 = 50;\n\n        function getPolygons(v) {\n            v = (v / 2) + 0.5;\n            v = Math.min(1, Math.max(0, v));\n            var x1 = v * 100;\n            if (Math.abs(x1 - x2) < 0.1) {\n                x2 = x1;\n            } else {\n                x2 += (x1 - x2) / 20;\n            }\n            return {\n                rim: 'polygon(' + x1 + '% 0, 100% 0, 100% 100%, ' + x2 + '% 100%)',\n                disc: 'polygon(0 0, ' + x1 + 0.01 + '% 0, ' + x2 + 0.01 + '% 100%, 0 100%)'\n            };\n        }\n\n        function onUpdate() {\n            slider.setAttribute('style', 'transform: translateX(' + (pow.x * width / 2) + 'px)');\n            // if (!isLoaded) {\n            var polygons = getPolygons(pow.x);\n            discOverview.setAttribute('style', 'shape-inside: ' + polygons.disc + '; clip-path: ' + polygons.disc + '; -webkit-clip-path: ' + polygons.disc + ';');\n            rimOverview.setAttribute('style', 'shape-inside: ' + polygons.rim + '; clip-path: ' + polygons.rim + '; -webkit-clip-path: ' + polygons.rim + ';');\n            var s1 = 1.1 - (pow.x + 1) / 2 * 0.1;\n            var s2 = 1 + (pow.x + 1) / 2 * 0.1;\n            var b1 = 20 * (pow.x < 0 ? Math.abs(pow.x) : 0) + 'px';\n            var b2 = 20 * (pow.x > 0 ? Math.abs(pow.x) : 0) + 'px';\n            discCover.setAttribute('style', 'transform: scale(' + s1 + '); filter: blur(' + b1 + ');');\n            rimCover.setAttribute('style', 'transform: scale(' + s2 + '); filter: blur(' + b2 + ');');\n            // }\n        }\n\n        function animate() {\n            onUpdate();\n            requestAnimationFrame(animate);\n        }\n        animate();\n        window.addEventListener('mousemove', onMove);\n\n        function onDown(e) {\n            if (!isLoading) {\n                isSwitching = true;\n                start.x = pow.x;\n                start.y = pow.y;\n                down = getMouse(e);\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n\n        function onMove(e) {\n            if (down) {\n                move = getMouse(e);\n                var end = start.x + (move.x - down.x) / (width / 2);\n                end = Math.max(-1, Math.min(1, end));\n                direction = end > pow.x ? 1 : -1;\n                pow.x = end;\n                onUpdate();\n                e.preventDefault();\n                e.stopPropagation();\n                e.stopImmediatePropagation();\n                return false;\n            }\n        }\n\n        var positions = [-1, 0, 1];\n\n        function onUp(e) {\n            if (move) {\n                move = null;\n                down = null;\n                var end = positions.reduce(function (a, b) {\n                    if (Math.abs(a - pow.x) < Math.abs(b - pow.x)) {\n                        return a;\n                    } else {\n                        return b;\n                    }\n                });\n                var shouldLoad = false;\n                if (end !== 0 && positions.length === 3) {\n                    positions = [-1, 1];\n                    shouldLoad = true;\n                }\n                if (positions.length == 2) {\n                    target = end === -1 ? rim : disc;\n                }\n                direction = end > pow.x ? 1 : -1;\n                TweenLite.to(pow, 1, {\n                    x: end,\n                    ease: Elastic.easeOut,\n                    onUpdate: onUpdate,\n                    onComplete: function () {\n                        if (shouldLoad) {\n                            StartLoading();\n                        }\n                    },\n                });\n            }\n            isSwitching = false;\n            removeListeners();\n        }\n\n        function onResize() {\n            width = slider.offsetWidth;\n            onUpdate();\n        }\n\n        function onMouseDown(e) {\n            onDown(e);\n            addMouseListeners();\n        }\n\n        function onTouchDown(e) {\n            onDown(e);\n            addTouchListeners();\n        }\n\n        function addMouseListeners() {\n            window.addEventListener('mousemove', onMove);\n            window.addEventListener('mouseup', onUp);\n        }\n\n        function addTouchListeners() {\n            window.addEventListener('touchmove', onMove);\n            window.addEventListener('touchend', onUp);\n        }\n\n        function removeListeners() {\n            window.removeEventListener('mousemove', onMove);\n            window.removeEventListener('mouseup', onUp);\n            window.removeEventListener('touchmove', onMove);\n            window.removeEventListener('touchend', onUp);\n        }\n\n        switcher.addEventListener('mousedown', onMouseDown);\n        switcher.addEventListener('touchstart', onTouchDown);\n        window.addEventListener('resize', onResize);\n\n        var tapped = false;\n        var buttons = Array.prototype.slice.call(document.querySelectorAll('.btn-overview'));\n        buttons.filter(function (btn, index) {\n            var previousTarget = null,\n                previousDirection = null;\n\n            function onOver(e) {\n                if (!isLoading && !isLoaded && !tapped) {\n                    previousTarget = target;\n                    previousDirection = direction;\n                    target = index === 1 ? disc : rim;\n                    direction = index === 1 ? 1 : -1;\n                    TweenLite.to(pow, 1, {\n                        x: direction * 0.2,\n                        ease: Elastic.easeOut,\n                        onUpdate: onUpdate,\n                        onComplete: function () {},\n                    });\n                }\n            }\n\n            function onOut(e) {\n                if (!isLoading && !isLoaded && !tapped) {\n                    target = previousTarget;\n                    direction = previousDirection;\n                    TweenLite.to(pow, 1, {\n                        x: direction,\n                        ease: Elastic.easeOut,\n                        onUpdate: onUpdate,\n                        onComplete: function () {},\n                    });\n                }\n            }\n\n            function onDown(e) {\n                if (!isLoading) {\n                    tapped = true;\n                    direction = index === 1 ? 1 : -1;\n                    target = index === 1 ? disc : rim;\n                    previousTarget = target;\n                    previousDirection = direction;\n                    positions = [-1, 1];\n                    TweenLite.to(pow, 1, {\n                        x: direction,\n                        ease: Elastic.easeOut,\n                        onUpdate: onUpdate,\n                        onComplete: function () {\n                            if (!isLoaded) {\n                                StartLoading();\n                            }\n                        },\n                    });\n                }\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                return false;\n            }\n\n            function onMouseDown(e) {\n                btn.removeEventListener('touchstart', onTouchDown);\n                return onDown(e);\n            }\n\n            function onTouchDown(e) {\n                btn.removeEventListener('mousedown', onMouseDown);\n                return onDown(e);\n            }\n            btn.addEventListener('mouseover', onOver);\n            btn.addEventListener('mouseout', onOut);\n            btn.addEventListener('mousedown', onMouseDown);\n            btn.addEventListener('touchstart', onTouchDown);\n        });\n    }\n\n    function InitSwiper() {\n        var swiper = new Swiper('.swiper-container', {\n            direction: 'horizontal',\n            loop: false,\n            pagination: {\n                el: '.swiper-pagination',\n            },\n            navigation: {\n                nextEl: '.swiper-button-next',\n                prevEl: '.swiper-button-prev',\n            },\n        });\n        swiper.on('slideChange', function (e) {\n            // console.log('slide changed', swiper.activeIndex);\n            var buttons = Array.prototype.slice.call(document.querySelectorAll('.btn-spec'));\n            buttons.filter(function (button, index) {\n                if (index === swiper.activeIndex) {\n                    button.addClass('active');\n                } else {\n                    button.removeClass('active');\n                }\n            });\n        });\n        var buttons = Array.prototype.slice.call(document.querySelectorAll('.btn-spec'));\n        buttons.filter(function (button, index) {\n            function onClick() {\n                swiper.slideTo(index);\n            }\n            button.addEventListener('click', onClick);\n        });\n    }\n\n    function InitMenu() {\n        var toggle = document.querySelector('.btn-toggle');\n\n        function onDown(e) {\n            toggle.active = !toggle.active;\n            if (toggle.active) {\n                body.addClass('submenu-active');\n                toggle.addClass('active');\n            } else {\n                body.removeClass('submenu-active');\n                toggle.removeClass('active');\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            return false;\n        }\n\n        function onMouseDown(e) {\n            toggle.removeEventListener('touchstart', onTouchDown);\n            return onDown(e);\n        }\n\n        function onTouchDown(e) {\n            toggle.removeEventListener('mousedown', onMouseDown);\n            return onDown(e);\n        }\n        toggle.addEventListener('mousedown', onMouseDown);\n        toggle.addEventListener('touchstart', onTouchDown);\n    }\n\n    InitLoading();\n    InitScrollTo();\n    InitSwitch();\n    InitSwiper();\n    InitMenu();\n\n    // OverviewLogo();\n\n}());"]}