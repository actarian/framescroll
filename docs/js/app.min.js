!function(){"use strict";/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);var i,e,t=!1,s="img/campagnolo/campagnolo_{0}.jpg",n="img/campagnolo2.mp4",a=25,u=498,o=u/a,c=[0,2.14,5.22,9.16,12.13,16.08,o],d=[],l=15,p={pow:0,end:0,endTime:0,previous:0,direction:0,diff:0,index:0},r=document.querySelector(".page"),v=document.querySelector(".container"),m=document.querySelector(".preload"),f=document.querySelector(".video"),w=document.querySelector(".picture"),g=document.querySelector(".track"),h=document.querySelector(".steps"),y=(document.querySelector(".captions"),Array.prototype.slice.call(document.querySelectorAll(".captions-item"))),L=document.querySelector(".player-time"),b=document.querySelector(".marker-time"),E=f,x=function e(){Scrollbar.use(window.OverscrollPlugin);var t=Scrollbar.init(r,{plugins:{overscroll:{}}});t.addListener(function(e){e.offset,e.limit,r.offsetWidth,r.offsetHeight});t.onScrollbarShouldScrollTo=function(e){document.querySelector(e.selector)===r&&t.scrollTo(e.x||0,e.y||0,500)};t.pause=function(){t.destroy()};t.resume=function(){return e()};return t}();function M(e,t){var n=parseInt(100*(e/t));m.innerHTML=n}function T(){t?v.setAttribute("class","container container-picture"):v.setAttribute("class","container container-video"),p.pow=p.end=0,0,i=null,f.pause(),g.addEventListener("mousedown",R,_),window.addEventListener("mousedown",z,_),window.addEventListener("mousemove",Y,_),window.addEventListener("mouseup",F,_),window.addEventListener("mouseleave",F,_),v.addEventListener("wheel",X),g.addEventListener("touchstart",R,_),window.addEventListener("touchstart",B,_),window.addEventListener("touchmove",Y,_),window.addEventListener("touchend",F,_),window.onscroll=C,window.requestAnimationFrame(I),A(1)}function A(o){y.filter(function(e,t){var n=c[t]-p.pow*E.duration;2<Math.abs(n)?e.setAttribute("class","captions-item"):0<o?e.setAttribute("class","captions-item "+(-.1<n?"entering":"exiting")):o<0&&e.setAttribute("class","captions-item "+(n<.1?"entering":"exiting"))})}t?(v.setAttribute("class","container container-picture loading"),(E=w).currentTime=0,E.duration=o,E.play=E.pause=function(){},E.setTime=function(){var e=Math.max(1,Math.min(u,Math.round(E.currentTime*a)));E.index!==e&&(E.index=e,E.src=d[e])},function(){var o=u,r=0,e=0,i=[];function a(){for(;i.length<l&&e<o;)i.push(!0),t(++e)}function t(n){var e=new XMLHttpRequest;e.open("GET",s.split("{0}").join(n),!0),e.responseType="blob",e.onload=function(){if(200===this.status){var e=this.response,t=URL.createObjectURL(e);d[n]=t,r++,i.shift(),M(r,o),r===o?(E.setTime(),T()):a()}},e.onerror=function(e){console.log("preload.error",e)},e.send()}a()}()):(v.setAttribute("class","container container-video loading"),(E=f).setTime=function(){},(e=new XMLHttpRequest).open("GET",n,!0),e.responseType="blob",e.onprogress=function(e){M(e.loaded,e.total)},e.onload=function(){if(200===this.status){var e=this.response,t=URL.createObjectURL(e);f.addEventListener("progress",function(e){console.log("video.progress",e,f.duration)},!1),f.addEventListener("error",function(e){console.log("video.error",e,f.error)}),f.autoplay=!0,f.mute=!0,f.src=t;var n=f.play();void 0!==n?n.then(function(){T()}).catch(function(e){console.log("video.error",e,f.error)}):T()}},e.onerror=function(e){console.log("preload.error",e)},e.send()),function(){for(var e=0;e<c.length;e++){var t='<div class="step" style="top:'+(c[e]/o*100).toFixed(3)+'%"></div>';h.innerHTML+=t}}();var S=window.peformance?performance:Date,q=1e3/a,P=0,H=0,k=0;function I(){P=S.now(),q<(k=P-H)&&(H=P-k%q,function(){if(E.duration){if(i)p.pow=p.end,E.pause(),E.currentTime=p.pow*E.duration,E.setTime();else if(p.end!==p.pow){E.paused||E.pause();var e=p.end-p.pow,t=1/a;if(Math.abs(e*E.duration)<t)p.pow=p.end;else{var n=e?e/Math.abs(e):0;p.pow+=t*n/E.duration}var o=Math.round(p.pow*E.duration/t)*t+1e-5;E.currentTime=o,E.setTime()}var r=g.offsetHeight;L.setAttribute("style","top:"+E.currentTime/E.duration*r+"px;"),A(p.direction)}}()),requestAnimationFrame(I)}function R(e){(e.preventDefault(),e.stopImmediatePropagation(),"step"===e.target.getAttribute("class"))&&N(Array.prototype.slice.call(e.target.parentNode.children).indexOf(e.target));return!1}function D(e){return e.clientY||e.touches[0].pageY}function j(e){var t=!1;return(p.pow<1&&1===e||x.offset.y<10&&-1===e)&&(t=!0),t?r.setAttribute("class","page locked"):r.setAttribute("class","page"),console.log("shouldLockScroll",t,e,p.pow,x.offset.y,e),t}var G,O=0;function U(e){if(x.offset.y<10){var t=D(e);if(i=t,O=p.end||0,j(1))return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}}function Y(e){if(i){var t=D(e);if(G=t,1<Math.abs(i-t)){var n=(i-t)/(3*window.innerHeight);p.end=Math.max(0,Math.min(1,O+n))}if(j(0<t-i?-1:1))return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}}function F(e){if(i){var t=i-G;if(t){i=null;var n=t/Math.abs(t),o=p.end*E.duration;c.filter(function(e,t){e<o&&o<c[t+1]&&(p.index=t+(0<n?0:1))}),W(n)}}}function X(e){var t=e.deltaY/Math.abs(e.deltaY);if(W(t),j(t))return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}function C(){var e=g.offsetHeight;b.setAttribute("style","top : "+p.end*(e-30)+"px;")}function N(e){if(e!==p.index){var t=(e-p.index)/Math.abs(e-p.index),n=c[p.index],o=c[e],r=p.pow*E.duration;if(r>=Math.min(n,o)&&r<=Math.max(n,o)){p.index=e,p.endTime=c[p.index],p.direction=t,p.end=p.endTime/E.duration;var i=g.offsetHeight;b.setAttribute("style","top : "+p.end*i+"px;"),$(".slick").slick("slickGoTo",e)}}}function W(e){p.index;N(1===e?Math.min(c.length-1,p.index+1):Math.max(0,p.index-1))}var _=window.PointerEvent?{passive:!1,capture:!0}:void 0;function z(e){g.removeEventListener("touchstart",R),window.removeEventListener("touchstart",B),window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",F),console.log("removeTouchEvents"),U(e)}function B(e){g.removeEventListener("mousedown",R),window.removeEventListener("mousedown",z),window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",F),window.removeEventListener("mouseleave",F),console.log("removeMouseEvents"),U(e)}}();
//# sourceMappingURL=app.min.js.map
